"\u003c!DOCTYPE html\u003e\r\n\r\n\u003chtml lang=\"de\"  data-user-prefs=\"null\"\u003e\r\n\u003chead\u003e\r\n    \u003cmeta charset=\"UTF-8\"\u003e\r\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n    \u003ctitle\u003ePurview Panda - Login\u003c/title\u003e\r\n    \r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\u003cmeta name=\"description\" content=\"Purview Panda – Security, Compliance \u0026amp; Data Governance Insights\"\u003e\r\n\u003cmeta name=\"keywords\" content=\"Purview,Panda,Security,Compliance,Data,Governance,Blog\"\u003e\r\n\u003cmeta property=\"og:title\" content=\"Login\"\u003e\r\n\u003cmeta property=\"og:description\" content=\"Purview Panda – Security, Compliance \u0026amp; Data Governance Insights\"\u003e\r\n\u003cmeta property=\"og:type\" content=\"article\"\u003e\r\n\r\n\u003cmeta property=\"og:image\" content=\"/img/logo.png\"\u003e\r\n\u003cmeta name=\"twitter:card\" content=\"summary\"\u003e\r\n\u003cmeta name=\"twitter:title\" content=\"Login\"\u003e\r\n\u003cmeta name=\"twitter:description\" content=\"Purview Panda – Security, Compliance \u0026amp; Data Governance Insights\"\u003e\r\n\u003cmeta name=\"twitter:image\" content=\"/img/logo.png\"\u003e\r\n\r\n    \u003clink href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\"\u003e\r\n    \u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css\"\u003e\r\n    \u003c!-- CSS für die Animationen --\u003e\r\n    \u003clink href=\"https://unpkg.com/aos@2.3.1/dist/aos.css\" rel=\"stylesheet\"\u003e\r\n    \u003clink rel=\"stylesheet\" href=\"/css/style.css\"\u003e\r\n    \u003clink rel=\"stylesheet\" href=\"/css/util.css\"\u003e\u003c!-- utilities --\u003e\r\n    \u003cmeta name=\"csrf-token\" content=\"OOnabpWt-uExI9i8Eht-fYh8msMWWbDMvddg\"\u003e\r\n    \u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/inline/bootstrap_start.js\"\u003e\u003c/script\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n\r\n\r\n\r\n\u003cnav class=\"navbar navbar-expand-lg navbar-light bg-light sticky-top\"\u003e\r\n    \u003cdiv class=\"container\"\u003e\r\n                \u003ca class=\"navbar-brand d-flex align-items-center gap-2\" href=\"/\"\u003e\r\n                    \u003cimg src=\"/img/logo.png\" data-logo-light=\"/img/logo.png\" data-logo-dark=\"/uploads/1755632270498-Logo_dark.png\" alt=\"Purview Panda\" height=\"48\" class=\"d-inline-block align-text-top\" id=\"siteLogo\"\u003e\r\n                \u003c/a\u003e\r\n        \u003cbutton class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"\u003e\r\n            \u003cspan class=\"navbar-toggler-icon\"\u003e\u003c/span\u003e\r\n        \u003c/button\u003e\r\n        \u003cdiv class=\"collapse navbar-collapse\" id=\"navbarNav\"\u003e\r\n                        \u003cul class=\"navbar-nav ms-auto align-items-lg-center\"\u003e\r\n                \r\n                \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link \" href=\"/blog\"\u003eBlog\u003c/a\u003e\u003c/li\u003e\r\n                \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link \" href=\"/pandas-way\"\u003ePanda\u0026#39;s Way\u003c/a\u003e\u003c/li\u003e\r\n                \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link \" href=\"/podcasts\"\u003ePodcasts\u003c/a\u003e\u003c/li\u003e\r\n                \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link \" href=\"/purview\" title=\"Mehr über Microsoft Purview (öffentliche Info-Seite)\" aria-label=\"Mehr über Microsoft Purview (öffentliche Info-Seite)\"\u003eMicrosoft Purview\u003c/a\u003e\u003c/li\u003e\r\n                \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link \" href=\"/autor\"\u003eAutor\u003c/a\u003e\u003c/li\u003e\r\n                \r\n                \u003cli class=\"nav-item ms-lg-2\"\u003e\r\n                    \u003cbutton id=\"themeToggleBtn\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" aria-label=\"Toggle theme\" aria-pressed=\"false\" title=\"Dark Mode\"\u003e\r\n                        \u003ci class=\"bi bi-moon-stars\" id=\"themeToggleIcon\"\u003e\u003c/i\u003e\r\n                    \u003c/button\u003e\r\n                \u003c/li\u003e\r\n                                \u003cli class=\"nav-item ms-lg-3\"\u003e\r\n                        \u003cform action=\"/search\" method=\"GET\" class=\"d-flex\" role=\"search\" id=\"siteSearchForm\"\u003e\r\n                            \u003cinput class=\"form-control form-control-sm\" type=\"search\" placeholder=\"Suche...\" aria-label=\"Search\" name=\"q\" value=\"\"\u003e\r\n                            \u003cbutton class=\"btn btn-sm btn-outline-primary ms-2\" type=\"submit\"\u003e\u003ci class=\"bi bi-search\"\u003e\u003c/i\u003e\u003c/button\u003e\r\n                        \u003c/form\u003e\r\n                    \u003c/li\u003e\r\n                    \u003cli class=\"nav-item dropdown ms-lg-2\"\u003e\r\n                        \u003ca class=\"nav-link dropdown-toggle\" href=\"#\" id=\"langSwitch\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\u003e\r\n                            DE\r\n                        \u003c/a\u003e\r\n                        \u003cul class=\"dropdown-menu\" aria-labelledby=\"langSwitch\"\u003e\r\n                            \u003cli\u003e\u003ca class=\"dropdown-item\" href=\"?lang=de\"\u003eDE\u003c/a\u003e\u003c/li\u003e\r\n                            \u003cli\u003e\u003ca class=\"dropdown-item\" href=\"?lang=en\"\u003eEN\u003c/a\u003e\u003c/li\u003e\r\n                        \u003c/ul\u003e\r\n                    \u003c/li\u003e\r\n                    \r\n                    \u003cli class=\"nav-item ms-lg-2\"\u003e\r\n                        \u003ca class=\"btn btn-sm btn-outline-success\" href=\"/login\"\u003e\u003ci class=\"bi bi-box-arrow-in-right\"\u003e\u003c/i\u003e nav.login\u003c/a\u003e\r\n                    \u003c/li\u003e\r\n                    \r\n            \u003c/ul\u003e\r\n        \u003c/div\u003e\r\n    \u003c/div\u003e\r\n\u003c/nav\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/inline/deeplinks.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/inline/logo_swap.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/inline/sw_register.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/purview-nav.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\"\u003e\r\ndocument.getElementById(\u0027siteSearchForm\u0027)?.addEventListener(\u0027submit\u0027, function(e){\r\n    const v=(this.q.value||\u0027\u0027).trim();\r\n    if(v.length\u003c=1){ e.preventDefault(); }\r\n});\r\n\u003c/script\u003e\r\n\r\n\r\n\u003cdiv class=\"container my-5\"\u003e\r\n    \u003cdiv class=\"row\"\u003e\r\n        \u003cdiv class=\"col-md-6 col-lg-4 mx-auto\"\u003e\r\n            \u003cdiv class=\"card shadow-sm\"\u003e\r\n                \u003cdiv class=\"card-body\"\u003e\r\n                    \u003ch2 class=\"card-title text-center mb-4\"\u003eAdmin-Login\u003c/h2\u003e\r\n                    \r\n                    \r\n\r\n                    \u003cform action=\"/login\" method=\"POST\"\u003e\r\n                        \u003c!-- WICHTIG: Dieses versteckte Feld ist die Lösung --\u003e\r\n                        \u003cinput type=\"hidden\" name=\"_csrf\" value=\"OOnabpWt-uExI9i8Eht-fYh8msMWWbDMvddg\"\u003e\r\n                        \r\n                        \u003cdiv class=\"mb-3\"\u003e\r\n                            \u003clabel for=\"username\" class=\"form-label\"\u003eBenutzername\u003c/label\u003e\r\n                            \u003cinput type=\"text\" class=\"form-control\" id=\"username\" name=\"username\" required\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv class=\"mb-3\"\u003e\r\n                            \u003clabel for=\"password\" class=\"form-label\"\u003ePasswort\u003c/label\u003e\r\n                            \u003cinput type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" required\u003e\r\n                        \u003c/div\u003e\r\n                        \u003cdiv class=\"d-grid\"\u003e\r\n                            \u003cbutton type=\"submit\" class=\"btn btn-primary\"\u003eAnmelden\u003c/button\u003e\r\n                        \u003c/div\u003e\r\n                    \u003c/form\u003e\r\n                    \u003cdiv class=\"text-center mt-3\"\u003e\r\n                        \u003ca href=\"/register\"\u003eNoch keinen Account? Registrieren\u003c/a\u003e\r\n                    \u003c/div\u003e\r\n                \u003c/div\u003e\r\n            \u003c/div\u003e\r\n        \u003c/div\u003e\r\n    \u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\r\n\u003cfooter class=\"footer mt-auto py-3 border-top border-secondary\"\u003e\r\n    \u003cdiv class=\"container d-flex flex-column flex-md-row justify-content-between align-items-center gap-2\"\u003e\r\n        \u003cdiv class=\"text-white-50 small\"\u003e\u0026copy; 2025 Purview Panda\u003c/div\u003e\r\n        \u003cul class=\"nav small\"\u003e\r\n            \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link px-2 text-white-50\" href=\"/blog\"\u003eBlog\u003c/a\u003e\u003c/li\u003e\r\n            \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link px-2 text-white-50\" href=\"/podcasts\"\u003ePodcasts\u003c/a\u003e\u003c/li\u003e\r\n            \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link px-2 text-white-50\" href=\"/impressum\"\u003eImpressum\u003c/a\u003e\u003c/li\u003e\r\n            \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link px-2 text-white-50\" href=\"/admin\"\u003eAdmin\u003c/a\u003e\u003c/li\u003e\r\n            \u003cli class=\"nav-item\"\u003e\u003ca class=\"nav-link px-2 text-white-50\" href=\"/editors\"\u003eEditors\u003c/a\u003e\u003c/li\u003e\r\n            \u003cli class=\"nav-item\"\u003e\u003ca id=\"openCookieSettingsLink\" class=\"nav-link px-2 text-white-50\" href=\"#\"\u003eCookie-Einstellungen\u003c/a\u003e\u003c/li\u003e\r\n        \u003c/ul\u003e\r\n        \u003cdiv class=\"d-flex align-items-center gap-3\"\u003e\r\n            \u003ca href=\"#\" class=\"text-white-50\"\u003e\u003ci class=\"bi bi-linkedin\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n            \u003ca href=\"#\" class=\"text-white-50\"\u003e\u003ci class=\"bi bi-twitter-x\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n            \u003ca href=\"#\" class=\"text-white-50\"\u003e\u003ci class=\"bi bi-youtube\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n        \u003c/div\u003e\r\n    \u003c/div\u003e\r\n\u003c/footer\u003e\r\n\r\n\u003c!-- Blog Post Modal --\u003e\r\n\u003cdiv class=\"modal fade\" id=\"blogPostModal\" tabindex=\"-1\" aria-labelledby=\"blogPostModalLabel\" aria-hidden=\"true\"\u003e\r\n  \u003cdiv class=\"modal-dialog modal-lg modal-dialog-scrollable\"\u003e\r\n    \u003cdiv class=\"modal-content\"\u003e\r\n      \u003cdiv class=\"modal-header\"\u003e\r\n        \u003ch5 class=\"modal-title\" id=\"blogPostModalLabel\"\u003eBeitrag\u003c/h5\u003e\r\n        \u003cbutton type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\u003e\u003c/button\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"modal-body\"\u003e\r\n  \u003cimg id=\"modal-post-image\" class=\"img-fluid rounded mb-3 hidden-init\" alt=\"Post Bild\"\u003e\r\n        \u003cdiv id=\"modal-post-content\" class=\"mb-3\"\u003e\u003c/div\u003e\r\n        \u003cdiv id=\"modal-post-tags\" class=\"small\"\u003e\u003c/div\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"modal-footer\"\u003e\r\n        \u003cbutton type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\u003eSchließen\u003c/button\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\u003c!-- Media Library Modal (mit Kategorie-Filter) --\u003e\r\n\u003cdiv class=\"modal fade\" id=\"mediaLibraryModal\" tabindex=\"-1\" aria-labelledby=\"mediaLibraryModalLabel\" aria-hidden=\"true\"\u003e\r\n  \u003cdiv class=\"modal-dialog modal-xl modal-dialog-scrollable\"\u003e\r\n    \u003cdiv class=\"modal-content\"\u003e\r\n      \u003cdiv class=\"modal-header\"\u003e\r\n        \u003ch5 class=\"modal-title\" id=\"mediaLibraryModalLabel\"\u003eMedienbibliothek\u003c/h5\u003e\r\n        \u003cbutton type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\u003e\u003c/button\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"modal-body\"\u003e\r\n        \u003cdiv class=\"d-flex flex-wrap gap-2 mb-3\" id=\"media-category-filters\"\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-primary active\" data-cat=\"all\"\u003eAlle\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-primary\" data-cat=\"Blog-Titelbild\"\u003eBlog-Titelbild\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-primary\" data-cat=\"Titelbild\"\u003eTitelbild\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-primary\" data-cat=\"Podcast\"\u003ePodcast\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-primary\" data-cat=\"Icon\"\u003eIcon\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-primary\" data-cat=\"Illustration\"\u003eIllustration\u003c/button\u003e\r\n        \u003c/div\u003e\r\n        \u003cdiv id=\"media-library-grid\"\u003e\u003c/div\u003e\r\n        \u003cdiv class=\"mt-3 gap-2 d-none\" id=\"media-size-options\"\u003e\r\n          \u003cspan class=\"me-2\"\u003eGröße:\u003c/span\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-secondary size-btn\" data-size=\"small\" type=\"button\"\u003eKlein\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-secondary size-btn\" data-size=\"medium\" type=\"button\"\u003eMittel\u003c/button\u003e\r\n          \u003cbutton class=\"btn btn-sm btn-outline-secondary size-btn\" data-size=\"original\" type=\"button\"\u003eOriginal\u003c/button\u003e\r\n        \u003c/div\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"modal-footer\"\u003e\r\n        \u003cbutton type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\u003eSchließen\u003c/button\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"https://unpkg.com/aos@2.3.1/dist/aos.js\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/inline/aos_init.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/script.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/api_helper.js\"\u003e\u003c/script\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\" src=\"/js/pickers.js\"\u003e\u003c/script\u003e\r\n\u003cdiv id=\"cookieConsentBar\" class=\"position-fixed bottom-0 start-0 end-0 p-3 cookie-bar hidden-init\"\u003e\r\n  \u003cdiv class=\"container d-flex flex-column flex-md-row align-items-start align-items-md-center gap-3\"\u003e\r\n    \u003cdiv class=\"flex-grow-1 small\"\u003e\r\n      Wir verwenden technisch notwendige Cookies (Session). Optionale Präferenzen (Dark Mode, Lernfortschritt) werden lokal gespeichert. Mit Klick auf \"Akzeptieren\" stimmen Sie der Speicherung Ihrer Präferenzen zu. Weitere Infos im \u003ca href=\"/impressum\" class=\"link-light text-decoration-underline\"\u003eImpressum/Datenschutz\u003c/a\u003e.\r\n    \u003c/div\u003e\r\n    \u003cdiv class=\"d-flex gap-2\"\u003e\r\n      \u003cbutton id=\"cookieAcceptBtn\" class=\"btn btn-sm btn-primary\"\u003eAkzeptieren\u003c/button\u003e\r\n      \u003cbutton id=\"cookieDeclineBtn\" class=\"btn btn-sm btn-outline-light\"\u003eNur Notwendig\u003c/button\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\"\u003e\r\n(function(){\r\n  const KEY=\u0027pp_cookie_consent_v1\u0027;\r\n  function hide(){ const bar=document.getElementById(\u0027cookieConsentBar\u0027); if(bar) bar.style.display=\u0027none\u0027; }\r\n  function show(){ const bar=document.getElementById(\u0027cookieConsentBar\u0027); if(bar) bar.style.display=\u0027block\u0027; }\r\n\r\n  function readConsent(){\r\n    try{ const raw = localStorage.getItem(KEY); if(!raw) return null; return JSON.parse(raw); }catch(e){ return null; }\r\n  }\r\n  function writeConsent(obj){\r\n    try{ localStorage.setItem(KEY, JSON.stringify(obj)); }catch(e){}\r\n    try{ window.dispatchEvent(new CustomEvent(\u0027pp:consent\u0027, { detail: obj })); }catch(e){}\r\n  }\r\n\r\n  function sendConsentBeacon(obj){\r\n    // Only send a minimal, non-identifying event when analytics consent is allowed\r\n    if(!obj || !obj.categories || !obj.categories.analytics) return;\r\n    const payload = JSON.stringify({ event: \u0027consent_given\u0027, meta:{ categories: obj.categories, ts: obj.ts } });\r\n    try{\r\n      if(navigator.sendBeacon){\r\n        navigator.sendBeacon(\u0027/api/track\u0027, payload);\r\n      } else {\r\n        fetch(\u0027/api/track\u0027, { method:\u0027POST\u0027, headers:{ \u0027Content-Type\u0027:\u0027application/json\u0027 }, body:payload }).catch(()=\u003e{});\r\n      }\r\n    }catch(e){}\r\n  }\r\n\r\n  document.addEventListener(\u0027DOMContentLoaded\u0027, function(){\r\n    const existing = readConsent();\r\n    if(!existing) show();\r\n\r\n    const acc=document.getElementById(\u0027cookieAcceptBtn\u0027);\r\n    const dec=document.getElementById(\u0027cookieDeclineBtn\u0027);\r\n\r\n    acc\u0026\u0026acc.addEventListener(\u0027click\u0027, ()=\u003e{\r\n      const obj = { version:1, ts:Date.now(), categories:{ necessary:true, preferences:true, analytics:true } };\r\n      writeConsent(obj); hide(); sendConsentBeacon(obj);\r\n      // Try optional server-side ingestion (no credentials, non-identifying)\r\n      try{ fetch(\u0027/api/consent\u0027, { method:\u0027POST\u0027, headers:{ \u0027Content-Type\u0027:\u0027application/json\u0027 }, body: JSON.stringify({ categories: obj.categories, ts: obj.ts }) }).catch(()=\u003e{}); }catch(e){}\r\n      // Preference sync may read this from localStorage; other scripts can listen to pp:consent\r\n    });\r\n\r\n    dec\u0026\u0026dec.addEventListener(\u0027click\u0027, ()=\u003e{\r\n      const obj = { version:1, ts:Date.now(), categories:{ necessary:true, preferences:false, analytics:false } };\r\n      writeConsent(obj); hide();\r\n      try{ fetch(\u0027/api/consent\u0027, { method:\u0027POST\u0027, headers:{ \u0027Content-Type\u0027:\u0027application/json\u0027 }, body: JSON.stringify({ categories: obj.categories, ts: obj.ts }) }).catch(()=\u003e{}); }catch(e){}\r\n    });\r\n  });\r\n})();\r\n\u003c/script\u003e\r\n\r\n\u003c!-- Cookie Settings Modal --\u003e\r\n\u003cdiv class=\"modal fade\" id=\"cookieSettingsModal\" tabindex=\"-1\" aria-hidden=\"true\"\u003e\r\n  \u003cdiv class=\"modal-dialog\"\u003e\r\n    \u003cdiv class=\"modal-content bg-dark text-white\"\u003e\r\n      \u003cdiv class=\"modal-header\"\u003e\r\n        \u003ch5 class=\"modal-title\"\u003eCookie-Einstellungen\u003c/h5\u003e\r\n        \u003cbutton type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"\u003e\u003c/button\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"modal-body small\"\u003e\r\n        \u003cp\u003eWählen Sie, welche optionalen Kategorien Sie zulassen möchten.\u003c/p\u003e\r\n        \u003cdiv class=\"form-check\"\u003e\r\n          \u003cinput class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"consentPreferences\"\u003e\r\n          \u003clabel class=\"form-check-label\" for=\"consentPreferences\"\u003ePreferences (Theme, UI-Einstellungen)\u003c/label\u003e\r\n        \u003c/div\u003e\r\n        \u003cdiv class=\"form-check\"\u003e\r\n          \u003cinput class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"consentAnalytics\"\u003e\r\n          \u003clabel class=\"form-check-label\" for=\"consentAnalytics\"\u003eAnalytics (anonyme Nutzungsdaten)\u003c/label\u003e\r\n        \u003c/div\u003e\r\n      \u003c/div\u003e\r\n      \u003cdiv class=\"modal-footer\"\u003e\r\n        \u003cbutton type=\"button\" class=\"btn btn-sm btn-outline-light\" data-bs-dismiss=\"modal\"\u003eAbbrechen\u003c/button\u003e\r\n        \u003cbutton type=\"button\" id=\"saveConsentBtn\" class=\"btn btn-sm btn-primary\"\u003eSpeichern\u003c/button\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\u003cscript nonce=\"p5dRGNfrKWh6MEmH18C4HQ==\"\u003e\r\n(function(){\r\n  function readConsent(){ try{ const raw = localStorage.getItem(\u0027pp_cookie_consent_v1\u0027); if(!raw) return null; return JSON.parse(raw); }catch(e){ return null; } }\r\n  function writeConsent(obj){ try{ localStorage.setItem(\u0027pp_cookie_consent_v1\u0027, JSON.stringify(obj)); }catch(e){} try{ window.dispatchEvent(new CustomEvent(\u0027pp:consent\u0027, { detail: obj })); }catch(e){} }\r\n  function sendConsentBeacon(obj){ if(!obj || !obj.categories || !obj.categories.analytics) return; const payload = JSON.stringify({ event: \u0027consent_given\u0027, meta:{ categories: obj.categories, ts: obj.ts } }); try{ if(navigator.sendBeacon){ navigator.sendBeacon(\u0027/api/track\u0027, payload); } else { fetch(\u0027/api/track\u0027, { method:\u0027POST\u0027, headers:{ \u0027Content-Type\u0027:\u0027application/json\u0027 }, body:payload }).catch(()=\u003e{}); } }catch(e){}\r\n    try{ fetch(\u0027/api/consent\u0027, { method:\u0027POST\u0027, headers:{ \u0027Content-Type\u0027:\u0027application/json\u0027 }, body: JSON.stringify({ categories: obj.categories, ts: obj.ts }) }).catch(()=\u003e{}); }catch(e){}\r\n  }\r\n\r\n  document.addEventListener(\u0027DOMContentLoaded\u0027, function(){\r\n    // Open modal from footer link if present\r\n    const openLink = document.getElementById(\u0027openCookieSettingsLink\u0027);\r\n    const modalEl = document.getElementById(\u0027cookieSettingsModal\u0027);\r\n    if(openLink \u0026\u0026 modalEl){\r\n      openLink.addEventListener(\u0027click\u0027, function(e){ e.preventDefault(); const bs = new bootstrap.Modal(modalEl); const cur = readConsent(); if(cur \u0026\u0026 cur.categories){ document.getElementById(\u0027consentPreferences\u0027).checked = !!cur.categories.preferences; document.getElementById(\u0027consentAnalytics\u0027).checked = !!cur.categories.analytics; } else { document.getElementById(\u0027consentPreferences\u0027).checked = true; document.getElementById(\u0027consentAnalytics\u0027).checked = false; } bs.show(); });\r\n    }\r\n\r\n    const saveBtn = document.getElementById(\u0027saveConsentBtn\u0027);\r\n    if(saveBtn){ saveBtn.addEventListener(\u0027click\u0027, function(){ const prefs = !!document.getElementById(\u0027consentPreferences\u0027).checked; const analytics = !!document.getElementById(\u0027consentAnalytics\u0027).checked; const obj = { version:1, ts:Date.now(), categories:{ necessary:true, preferences: prefs, analytics: analytics } }; writeConsent(obj); sendConsentBeacon(obj); const modal = bootstrap.Modal.getInstance(modalEl); if(modal) modal.hide(); }); }\r\n  });\r\n})();\r\n\u003c/script\u003e\r\n\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n\r\n"
