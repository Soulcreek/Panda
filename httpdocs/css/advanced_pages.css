.ap-page { --ap-gap: 1.25rem; }
.ap-row { margin-bottom:2.5rem; }
.ap-row .ap-col { position:relative; }
.ap-block { background:#fff; border:1px solid #dee2e6; border-radius:6px; padding:1rem; margin-bottom:1rem; }
.dark-mode .ap-block { background:#1f1f1f; border-color:#333; }
/* Builder UI */
.ap-builder-row-toolbar { position:absolute; top:-38px; left:0; display:flex; gap:.5rem; }
.ap-builder-col { border:1px dashed #bbb; padding:.75rem; border-radius:4px; background:#f8f9fa; }
.dark-mode .ap-builder-col { background:#222; border-color:#555; }
.ap-block-toolbar { display:flex; gap:.25rem; margin-bottom:.5rem; }
.ap-block[data-collapsed='1'] .ap-block-content { display:none; }
.ap-mini-badge { font-size:.65rem; text-transform:uppercase; letter-spacing:.5px; }
.ap-row-handle { cursor:grab; }
.ap-col-handle { cursor:grab; }
.ap-block-editable[contenteditable='true'] { outline:2px solid rgba(13,110,253,.35); min-height:80px; }
.ap-block-editable[contenteditable='true']:focus { outline:2px solid #0d6efd; background:#fff; }
.dark-mode .ap-block-editable[contenteditable='true'] { background:#1f1f1f; }
/* Config Side Panel */
.ap-config-sidepanel { position:fixed; top:0; right:0; width:340px; max-width:90%; height:100vh; background:#fff; border-left:1px solid #dee2e6; box-shadow:-4px 0 18px -6px rgba(0,0,0,.15); z-index:1085; display:flex; flex-direction:column; }
.dark-mode .ap-config-sidepanel { background:#1f1f1f; border-color:#333; }
.ap-config-sidepanel header { padding:.75rem 1rem; border-bottom:1px solid #e5e5e5; display:flex; justify-content:space-between; align-items:center; }
.dark-mode .ap-config-sidepanel header { border-color:#333; }
.ap-config-sidepanel .ap-config-body { padding:1rem; overflow:auto; flex:1; }
.ap-config-sidepanel label { font-size:.75rem; text-transform:uppercase; letter-spacing:.5px; font-weight:600; margin-top:.75rem; }
.ap-config-sidepanel .form-control, .ap-config-sidepanel input[type=color] { font-size:.85rem; }
/* Legacy modal fallback (centered) */
.ap-block-config-modal, .ap-media-picker-modal { position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:flex-start; justify-content:center; padding:4rem 1rem 2rem; z-index:1080; overflow:auto; }
.ap-config-inner, .ap-mp-inner { background:#fff; padding:1rem 1.25rem; border-radius:8px; width:100%; max-width:640px; box-shadow:0 18px 48px -12px rgba(0,0,0,.35); position:relative; }
.dark-mode .ap-config-inner, .dark-mode .ap-mp-inner { background:#232323; }
.ap-config-header { display:flex; justify-content:space-between; align-items:center; gap:1rem; }
.ap-config-header button { border:0; background:transparent; font-size:1.2rem; line-height:1; }
.ap-config-body { max-height:60vh; overflow:auto; }
.ap-mp-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:.75rem; }
.ap-mp-item { background:#fff; border:1px solid #ccc; border-radius:6px; padding:.25rem; display:flex; flex-direction:column; gap:.25rem; align-items:center; justify-content:center; cursor:pointer; transition:border .25s, box-shadow .25s; }
.dark-mode .ap-mp-item { background:#1f1f1f; border-color:#444; }
.ap-mp-item:hover { border-color:#0d6efd; box-shadow:0 0 0 2px rgba(13,110,253,.35); }
.ap-mp-item img { max-width:100%; height:70px; object-fit:cover; border-radius:4px; }
.ap-mp-name { font-size:.65rem; width:100%; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.ap-block-dragging { opacity:.5; }
.ap-block-drag-over { outline:2px dashed #0d6efd; }
