<%- include('partials/header') %>
<div class="container my-5">
  <div class="row">
    <div class="col-lg-10 mx-auto">
      <!-- Navigation Breadcrumb -->
      <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/purview">Purview Knowledge Center</a></li>
          <li class="breadcrumb-item active" aria-current="page">FAQ</li>
        </ol>
      </nav>

      <!-- Header -->
      <div class="text-center mb-5">
        <h1 class="display-5">Frequently Asked Questions</h1>
        <p class="lead text-muted">Common questions about Microsoft Purview and our data governance practices</p>
      </div>

      <!-- FAQ Categories -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h6 class="card-title">Question Categories</h6>
              <div class="btn-group-vertical btn-group-sm w-100" role="group">
                <a href="#basics" class="btn btn-outline-primary text-start">Purview Basics</a>
                <a href="#implementation" class="btn btn-outline-primary text-start">Our Implementation</a>
                <a href="#compliance" class="btn btn-outline-primary text-start">Compliance & Security</a>
                <a href="#workflows" class="btn btn-outline-primary text-start">Daily Workflows</a>
                <a href="#troubleshooting" class="btn btn-outline-primary text-start">Troubleshooting</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- FAQ Sections -->
      <div class="accordion" id="faqAccordion">
        
        <!-- Purview Basics -->
        <div class="mb-5">
          <h3 id="basics" class="border-bottom border-primary pb-2 mb-4">Purview Basics</h3>
          
          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q1">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer1">
                What is Microsoft Purview and why should I care?
              </button>
            </h2>
            <div id="answer1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p><strong>Microsoft Purview</strong> is a comprehensive data governance platform that helps organizations:</p>
                <ul>
                  <li><strong>Discover</strong> what data they have and where it lives</li>
                  <li><strong>Understand</strong> data relationships and dependencies</li>
                  <li><strong>Govern</strong> data access and usage policies</li>
                  <li><strong>Protect</strong> sensitive information automatically</li>
                </ul>
                <div class="alert alert-info mt-3">
                  <strong>For our content team:</strong> This means better organization, easier content discovery, 
                  and automated compliance with data protection regulations.
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q2">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer2">
                How does Purview relate to our daily content work?
              </button>
            </h2>
            <div id="answer2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Purview principles are already built into your daily workflows:</p>
                <div class="row">
                  <div class="col-md-6">
                    <h6>When you...</h6>
                    <ul>
                      <li>Tag media files with keywords</li>
                      <li>Set content visibility (public/private)</li>
                      <li>Use the media library search</li>
                      <li>Review content before publishing</li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <h6>You're using Purview concepts:</h6>
                    <ul>
                      <li>Data classification & cataloging</li>
                      <li>Sensitivity labeling</li>
                      <li>Asset discovery & search</li>
                      <li>Governance workflows</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Our Implementation -->
        <div class="mb-5">
          <h3 id="implementation" class="border-bottom border-primary pb-2 mb-4">Our Implementation</h3>
          
          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q3">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer3">
                How do I see all our content assets in one place?
              </button>
            </h2>
            <div id="answer3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>We have several tools for content discovery:</p>
                <div class="table-responsive">
                  <table class="table table-sm">
                    <thead>
                      <tr>
                        <th>Tool</th>
                        <th>What it shows</th>
                        <th>Who can access</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><strong>Media Library</strong></td>
                        <td>All uploaded images, documents, audio files</td>
                        <td>Editors and above</td>
                      </tr>
                      <tr>
                        <td><strong>Admin Tools</strong></td>
                        <td>Complete database view: posts, media, users</td>
                        <td>Administrators only</td>
                      </tr>
                      <tr>
                        <td><strong>Purview Dashboard</strong></td>
                        <td>High-level metrics and operational overview</td>
                        <td>All authenticated users</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="alert alert-success mt-3">
                  <strong>Tip:</strong> Use the search functionality in each tool to find specific content quickly.
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q4">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer4">
                What happens to content when it's deleted?
              </button>
            </h2>
            <div id="answer4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Our retention policy follows data governance best practices:</p>
                <div class="row">
                  <div class="col-md-6">
                    <h6>Immediate Actions:</h6>
                    <ul>
                      <li>Content is removed from public view</li>
                      <li>Access permissions are revoked</li>
                      <li>Deletion is logged for audit trail</li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <h6>Retention Period:</h6>
                    <ul>
                      <li><strong>Draft content:</strong> 30 days</li>
                      <li><strong>Published content:</strong> 90 days</li>
                      <li><strong>Media files:</strong> Based on usage</li>
                    </ul>
                  </div>
                </div>
                <div class="alert alert-warning mt-3">
                  <strong>Important:</strong> Recovery may be possible within the retention period. 
                  Contact administrators immediately if you need to restore deleted content.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Compliance & Security -->
        <div class="mb-5">
          <h3 id="compliance" class="border-bottom border-primary pb-2 mb-4">Compliance & Security</h3>
          
          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q5">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer5">
                How do we ensure GDPR compliance?
              </button>
            </h2>
            <div id="answer5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Our system implements several GDPR-compliant features:</p>
                <div class="row">
                  <div class="col-md-6">
                    <h6>Data Subject Rights:</h6>
                    <ul>
                      <li>User account deletion</li>
                      <li>Data export functionality</li>
                      <li>Consent management</li>
                      <li>Access request handling</li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <h6>System Protections:</h6>
                    <ul>
                      <li>Encrypted data storage</li>
                      <li>Audit logging</li>
                      <li>Regular security updates</li>
                      <li>Access control reviews</li>
                    </ul>
                  </div>
                </div>
                <div class="alert alert-info mt-3">
                  <strong>Your responsibility:</strong> When handling user data, always check if explicit consent 
                  is required and document the lawful basis for processing.
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q6">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer6">
                What data classification levels do we use?
              </button>
            </h2>
            <div id="answer6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <div class="table-responsive">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Classification</th>
                        <th>Description</th>
                        <th>Examples</th>
                        <th>Access Level</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="table-success">
                        <td><strong>Public</strong></td>
                        <td>Information intended for public consumption</td>
                        <td>Blog posts, marketing materials, press releases</td>
                        <td>Anyone</td>
                      </tr>
                      <tr class="table-warning">
                        <td><strong>Internal</strong></td>
                        <td>Information for organizational use only</td>
                        <td>Draft content, internal communications, workflows</td>
                        <td>Authenticated users</td>
                      </tr>
                      <tr class="table-danger">
                        <td><strong>Restricted</strong></td>
                        <td>Sensitive information requiring special handling</td>
                        <td>User personal data, admin credentials, analytics</td>
                        <td>Administrators only</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Daily Workflows -->
        <div class="mb-5">
          <h3 id="workflows" class="border-bottom border-primary pb-2 mb-4">Daily Workflows</h3>
          
          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q7">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer7">
                What's the best way to tag content for discoverability?
              </button>
            </h2>
            <div id="answer7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Effective tagging follows the <strong>SMART</strong> principle:</p>
                <ul>
                  <li><strong>S</strong>pecific: Use precise, descriptive terms</li>
                  <li><strong>M</strong>eaningful: Choose tags that add real value</li>
                  <li><strong>A</strong>ccessible: Use terms your audience would search for</li>
                  <li><strong>R</strong>elevant: Only tag content that truly matches</li>
                  <li><strong>T</strong>imeless: Prefer terms that won't become outdated quickly</li>
                </ul>
                
                <div class="row mt-3">
                  <div class="col-md-6">
                    <h6 class="text-success">Good Examples:</h6>
                    <ul class="list-unstyled">
                      <li>✅ "social-media-strategy"</li>
                      <li>✅ "customer-interview"</li>
                      <li>✅ "product-launch-2024"</li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <h6 class="text-danger">Avoid These:</h6>
                    <ul class="list-unstyled">
                      <li>❌ "important" (too vague)</li>
                      <li>❌ "stuff" (meaningless)</li>
                      <li>❌ "temp123" (not searchable)</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q8">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer8">
                How do I track where specific content is being used?
              </button>
            </h2>
            <div id="answer8" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>We track content usage through several mechanisms:</p>
                <div class="card-group">
                  <div class="card">
                    <div class="card-body">
                      <h6 class="card-title">Media References</h6>
                      <p class="card-text">Media library shows where each file is used in posts and pages.</p>
                    </div>
                  </div>
                  <div class="card">
                    <div class="card-body">
                      <h6 class="card-title">Content Analytics</h6>
                      <p class="card-text">Admin tools provide usage statistics and reference tracking.</p>
                    </div>
                  </div>
                  <div class="card">
                    <div class="card-body">
                      <h6 class="card-title">Audit Logs</h6>
                      <p class="card-text">Detailed logs show when and how content was accessed or modified.</p>
                    </div>
                  </div>
                </div>
                
                <div class="alert alert-info mt-3">
                  <strong>Pro Tip:</strong> Before deleting media files, check the usage report to avoid breaking links.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Troubleshooting -->
        <div class="mb-5">
          <h3 id="troubleshooting" class="border-bottom border-primary pb-2 mb-4">Troubleshooting</h3>
          
          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q9">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer9">
                I can't find content I know exists. What should I check?
              </button>
            </h2>
            <div id="answer9" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <div class="checklist">
                  <h6>Troubleshooting Checklist:</h6>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="check1">
                    <label class="form-check-label" for="check1">
                      Check if you have the right permissions to view the content
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="check2">
                    <label class="form-check-label" for="check2">
                      Verify the content status (draft vs. published)
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="check3">
                    <label class="form-check-label" for="check3">
                      Try different search terms or filters
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="check4">
                    <label class="form-check-label" for="check4">
                      Check if the content was recently moved or renamed
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="check5">
                    <label class="form-check-label" for="check5">
                      Contact an administrator if still unable to locate
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="q10">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#answer10">
                The system seems slow or unresponsive. What can I do?
              </button>
            </h2>
            <div id="answer10" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Performance issues can have several causes. Try these steps:</p>
                
                <div class="row">
                  <div class="col-md-6">
                    <h6>Quick Fixes:</h6>
                    <ol>
                      <li>Refresh the page (Ctrl+F5)</li>
                      <li>Clear browser cache and cookies</li>
                      <li>Try a different browser</li>
                      <li>Check your internet connection</li>
                    </ol>
                  </div>
                  <div class="col-md-6">
                    <h6>If Problem Persists:</h6>
                    <ol>
                      <li>Check system status page</li>
                      <li>Contact technical support</li>
                      <li>Include browser console errors</li>
                      <li>Note the time and actions taken</li>
                    </ol>
                  </div>
                </div>

                <div class="alert alert-secondary mt-3">
                  <strong>For Administrators:</strong> Use the diagnostic endpoint at 
                  <code>/admin/tools/diag</code> to check system health and performance metrics.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Resources -->
      <div class="mt-5">
        <div class="card bg-light">
          <div class="card-body">
            <h5 class="card-title">Still Have Questions?</h5>
            <div class="row">
              <div class="col-md-8">
                <p class="mb-2">Can't find what you're looking for? Here are additional resources:</p>
                <ul class="list-unstyled">
                  <li><a href="/purview" class="text-decoration-none">← Back to Purview Overview</a></li>
                  <li><a href="/purview/glossary" class="text-decoration-none">Data Governance Glossary</a></li>
                  <li><a href="mailto:admin@example.com" class="text-decoration-none">Contact Technical Support</a></li>
                </ul>
              </div>
              <div class="col-md-4">
                <% if (typeof isAdmin !== 'undefined' && isAdmin) { %>
                  <div class="card border-primary">
                    <div class="card-body p-3">
                      <h6 class="card-title">Admin Tools</h6>
                      <a href="/admin/tools" class="btn btn-primary btn-sm">System Diagnostics</a>
                    </div>
                  </div>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced FAQ functionality -->
  <script nonce="<%= cspNonce %>">
    document.addEventListener('DOMContentLoaded', function() {
      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });

      // Search functionality for FAQ
      const searchInput = document.createElement('input');
      searchInput.type = 'text';
      searchInput.className = 'form-control mb-4';
      searchInput.placeholder = 'Search FAQ...';
      
      const header = document.querySelector('h1').parentElement;
      header.appendChild(searchInput);

      searchInput.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const faqItems = document.querySelectorAll('.accordion-item');
        
        faqItems.forEach(item => {
          const title = item.querySelector('.accordion-button').textContent.toLowerCase();
          const content = item.querySelector('.accordion-body').textContent.toLowerCase();
          
          if (title.includes(searchTerm) || content.includes(searchTerm) || searchTerm === '') {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
      });

      // Auto-expand accordion item if URL has hash matching question
      const hash = window.location.hash;
      if (hash && hash.startsWith('#answer')) {
        const target = document.querySelector(hash);
        if (target) {
          target.classList.add('show');
        }
      }
    });
  </script>
</div>
<%- include('partials/footer') %>
