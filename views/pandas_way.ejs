<%- include('partials/header') %>

<!-- Wrapper-Div mit der korrekten CSS-Klasse aus Ihrer style.css -->
<div class="pandas-way-hero-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-4">Panda's Way to Data Security</h1>
                <p class="lead">Ein interaktiver Pfad, um die Grundlagen der Datensicherheit zu verstehen.</p>
            </div>
        </div>
    </div>
</div>

<div class="container my-5">
    <% if (levels && levels.length > 0) { %>
        <div class="row">
            <!-- Container für die Navigation -->
            <div class="col-md-3">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <!-- Navigations-Buttons werden per Script eingefügt -->
                </div>
            </div>

            <!-- Container für die Inhalte -->
            <div class="col-md-9">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- Inhalts-Panes werden per Script eingefügt -->
                </div>
            </div>
        </div>

        <!-- Script, um die Inhalte dynamisch und sauber zu erstellen -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const levelsData = <%- JSON.stringify(levels) %>;
                const navContainer = document.getElementById('v-pills-tab');
                const contentContainer = document.getElementById('v-pills-tabContent');

                levelsData.forEach((level, index) => {
                    const isActive = index === 0;

                    // Erstelle den Navigations-Button
                    const button = document.createElement('button');
                    button.className = `nav-link text-start ${isActive ? 'active' : ''}`;
                    button.id = `v-pills-level${level.id}-tab`;
                    button.setAttribute('data-bs-toggle', 'pill');
                    button.setAttribute('data-bs-target', `#v-pills-level${level.id}`);
                    button.type = 'button';
                    button.role = 'tab';
                    button.setAttribute('aria-controls', `v-pills-level${level.id}`);
                    button.setAttribute('aria-selected', isActive.toString());
                    button.innerText = level.title;
                    navContainer.appendChild(button);

                    // Erstelle das Inhalts-Pane
                    const contentPane = document.createElement('div');
                    contentPane.className = `tab-pane fade ${isActive ? 'show active' : ''}`;
                    contentPane.id = `v-pills-level${level.id}`;
                    contentPane.setAttribute('role', 'tabpanel');
                    contentPane.setAttribute('aria-labelledby', `v-pills-level${level.id}-tab`);
                    contentPane.innerHTML = level.content;
                    contentContainer.appendChild(contentPane);
                });
            });
        </script>

    <% } else { %>
        <div class="text-center">
            <p>Es konnten keine Inhalte für "Panda's Way" geladen werden.</p>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>
